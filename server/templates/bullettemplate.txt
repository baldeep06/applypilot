SYSTEM INSTRUCTION: You are generating a cover letter with bullet points. Follow these rules EXACTLY.

===== ABSOLUTE RULES =====
RULE 1: TOTAL LENGTH = 250-300 WORDS MAXIMUM (must fit in 80% of one page)
RULE 2: Use simple, concise language - sound HUMAN, not AI
RULE 3: NEVER use em dashes (—)
RULE 4: Simplify role names (e.g., "Summer Technology/Developer" becomes "Summer Developer")
RULE 5: Each bullet point MUST be on ONE continuous line

===== CRITICAL BULLET FORMATTING =====
⚠️ MANDATORY: Each bullet MUST be formatted as ONE continuous line like this:
*  **Company Name (Role):** Description text continues here without line breaks.

DO NOT format like this (WRONG):
*
**Company Name (Role):** Description text here.

DO NOT add line breaks between the asterisk and the company name.
The asterisk, company name, and description must ALL be on the same line.

===== INPUT DATA =====

Job Posting:
{{JOB_TEXT}}

Resume (FOR REFERENCE):
{{RESUME_TEXT}}

===== EXACT OUTPUT FORMAT =====

{{TODAY_DATE}}

[Full name from resume]
[Phone from resume]
[Email from resume]

CRITICAL - NAME EXTRACTION VALIDATION:
⚠️ When extracting "[Full name from resume]":
✅ Extract ONLY the person's actual full name (first name + last name, optionally middle name)
✅ The name should be 2-4 words maximum (e.g., "John Smith", "Mary Jane Watson", "Aadit Shah")
✅ Verify the extracted name makes sense - it should NOT include:
  ❌ Job titles (e.g., "Software Engineer", "Intern", "Developer")
  ❌ Company names
  ❌ Role descriptions (e.g., "Co-Op", "Internship")
  ❌ Any other resume content beyond the actual name
✅ After extraction, validate: Does this look like a person's name, or did other text get accidentally included?
✅ If the name looks malformed (contains role titles, company names, or other text), re-extract using ONLY the name portion
✅ Apply role title simplification rules when generating filenames, but the signature name should be ONLY the actual name

VALIDATION CHECKPOINT:
Before using the name in the signature or filename:
□ Does it contain ONLY the person's name (2-4 words)?
□ Does it exclude job titles, company names, and role descriptions?
□ Does it make sense as a real person's name?
□ If generating a filename like "[Name] - [Company] [Position]", ensure the name portion is clean and simplified role titles are applied separately

Dear [Hiring manager name OR "Hiring Manager"],

I am excited about the opportunity to join the innovative team at [company name] as a [simplified position name]. [GENERATE_SENTENCE]

I've also developed invaluable practical skills through diverse work and project experience.

[BULLET_POINTS]

[GLAZING_PARAGRAPH]

Enclosed, please find my resume. Thank you for considering my application.

Sincerely,
[Full name]

===== GENERATE_SENTENCE INSTRUCTIONS =====
Generate ONE sentence that:
- Starts with "I am eager to leverage"
- Highlights 2-3 specific technical skills from job description that match resume

CRITICAL - MANDATORY SKILL MATCHING:
⚠️ YOU MUST identify technologies/skills that appear in BOTH the job posting AND the resume.

MANDATORY PROCESS:
1. FIRST, identify ALL technologies explicitly mentioned in the job posting's "Required Skills", "Required Qualifications", "Technical Requirements", or similar sections
   - Extract the 3-4 most important/key technologies from the job posting
   - Focus on technologies that are central to the role
   
2. SECOND, check which of those same technologies appear in the resume (Skills, Experience, Projects, Coursework)
   - Consider variations (e.g., if job says "Postgres" and resume says "PostgreSQL", these match)
   - Consider related terms and synonyms

3. THIRD, you MUST mention at least 2-3 of these matching technologies in the opening sentence
   - Prioritize the most important/commonly mentioned ones from the job posting
   - Use the exact terminology from the job posting when possible
   - If variants exist, use the version that appears in the resume

- Does NOT copy exact phrases from job description
- Does NOT use placeholders like "[Programming Language]"
- Keeps it under 25 words

Example: "I am eager to leverage my experience with [technology 1], [technology 2], and [technology 3] to contribute to your mission."
(Note: Replace [technology 1], [technology 2], [technology 3] with actual technologies that appear in BOTH the job posting requirements AND the resume)

===== BULLET_POINTS INSTRUCTIONS =====
Extract THREE relevant experiences/projects from the resume that align with job description.

⚠️ CRITICAL FORMAT - Each bullet MUST be ONE continuous line:
*  **Company Name (Role):** Description here continues without line breaks.

CRITICAL - MANDATORY SKILL MATCHING IN BULLETS:
⚠️ YOU MUST mention technologies/skills that appear in BOTH the job posting AND the resume within the bullet descriptions.

MANDATORY PROCESS:
1. Identify the 3-4 key technologies explicitly required in the job posting's requirements section
2. Check which ones appear in the resume experience/projects being described in each bullet
3. Naturally weave at least 1-2 matching technologies into EACH bullet point
   - If a technology is required in the job posting AND mentioned in the resume experience/project for that bullet, mention it
   - If a technology is required in the job posting AND mentioned in resume coursework/other sections, reference it naturally
   - Prioritize technologies that are directly relevant to each specific bullet's experience

Requirements:
- Start with asterisk and two spaces: "*  "
- Bold the company/project name and role: **Company (Role):**
- Then description text
- ENTIRE bullet must be ONE line (no line breaks within the bullet)
- Each bullet: MAX 50 words
- Focus on experiences matching job requirements
- Use technologies from BOTH resume AND job description
- Each bullet should naturally mention at least 1-2 technologies that match between job posting and resume
- DO NOT copy resume text word-for-word - rephrase naturally
- DO NOT include statistics or metrics (no percentages, no numbers)
- Last bullet should be "Technical Projects:" (no specific project name in parentheses)

Example of CORRECT formatting (each is ONE line):
*  **[Company Name (Role):]** [Description mentioning technologies that appear in both job posting and resume, woven naturally into the experience narrative.]
*  **[Company Name (Role):]** [Description mentioning technologies that appear in both job posting and resume, woven naturally into the experience narrative.]
*  **Technical Projects:** [Description mentioning technologies that appear in both job posting and resume, woven naturally into the project narrative.]

WRONG (bullet character on separate line - DO NOT DO THIS):
*
**Company (Role):** Description here.

===== GLAZING_PARAGRAPH INSTRUCTIONS =====
Write a 55-60 word paragraph that:
- Starts with "I am drawn by"
- Connects personal values to company's mission from job description
- Does NOT copy company's values word-for-word
- Paraphrases and aligns with personal goals
- 2-3 sentences maximum
- Does NOT describe company history

CRITICAL - PARAGRAPH FLOW:
⚠️ This paragraph must read as a COHESIVE exploration, not disconnected statements.

REQUIRED - SMOOTH STORYTELLING APPROACH:
✅ Each sentence should NATURALLY build on or connect to the previous sentence
✅ Use conversational connectors: "and," "which," "since" to create smooth flow
✅ Sentences should feel like they're exploring ONE continuous thought
✅ READ IT ALOUD TEST: Does it sound like one cohesive exploration or separate statements?

FORBIDDEN:
❌ Starting multiple sentences with "I" + verb creating a list effect
❌ Creating separate, independent sentences that don't connect
❌ Choppy transitions that make it sound like a list

===== SPACING - SINGLE BLANK LINES ONLY =====
Use EXACTLY ONE blank line between sections:
- One blank line after date
- One blank line after email
- One blank line after "Dear Hiring Manager,"
- One blank line after opening paragraph
- One blank line after "I've also developed..."
- NO blank lines between bullet points
- One blank line after bullet points
- One blank line after glazing paragraph
- One blank line before "Sincerely,"

===== EXAMPLE OUTPUT STRUCTURE =====
December 24, 2025

Aadit Shah
(647) 994-8661
aadit.shah@uwaterloo.ca

Dear Hiring Manager,

I am excited about the opportunity to join the innovative team at [Company Name] as a [Role Title]. I am eager to leverage my experience with [technology 1], [technology 2], and [technology 3] to contribute to your mission.
[Note: [technology 1], [technology 2], [technology 3] should be replaced with actual technologies that appear in BOTH the job posting requirements AND the resume]

I've also developed invaluable practical skills through diverse work and project experience.

*  **[Company Name (Role):]** [Description mentioning technologies that appear in both job posting and resume, woven naturally into the experience.]
*  **[Company Name (Role):]** [Description mentioning technologies that appear in both job posting and resume, woven naturally into the experience.]
*  **Technical Projects:** [Description mentioning technologies that appear in both job posting and resume, woven naturally into the project narrative.]

[I am drawn by paragraph would be customized based on job posting specifics]

Enclosed, please find my resume. Thank you for considering my application.

Sincerely,
Aadit Shah

===== FINAL CHECKPOINT =====
Before outputting, verify:
□ Total is 250-300 words
□ Opening sentence is under 25 words
□ THREE bullet points, each starting with "*  " (asterisk + 2 spaces)
□ Each bullet is ONE continuous line (no line breaks)
□ Each bullet is MAX 50 words
□ Bullets use **bold** for company/role
□ Glazing paragraph is 55-60 words
□ EXACTLY ONE blank line between sections
□ NO statistics or metrics in bullets
□ NO line breaks within bullets
□ Uses "*" not "·" for bullets
